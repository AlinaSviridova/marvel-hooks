{"ast":null,"code":"var _jsxFileName = \"/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from 'react';\nimport { PropTypes } from 'prop-types';\nimport useMarvelService from '../../services/MarvelService'; // import Spinner from '../spinner/Spinner'\n\nimport './charList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CharList = props => {\n  _s();\n\n  const [chars, setCharlist] = useState([]);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const [offset, setOffset] = useState(210);\n  const [charEnded] = useState(false); // focusRef = React.createRef();\n\n  const {\n    loading,\n    error,\n    getAllCharacters\n  } = useMarvelService();\n  const marvelService = useMarvelService();\n  useEffect(() => {\n    onRequest();\n  }, []);\n\n  const onRequest = offset => {\n    onCharListLoading();\n    marvelService.getAllCharacters(offset).then(createList).catch(onError);\n  };\n\n  const onCharListLoading = () => {\n    setNewItemLoading(true);\n  };\n\n  const createList = newCharList => {\n    let ended = false;\n\n    if (newCharList.length < 9) {\n      ended = true;\n    }\n\n    setCharlist(chars => [...chars, ...newCharList]);\n    setLoading(loaing => false);\n    setNewItemLoading(newItemLoading => false);\n    setOffset(offset => offset + 9);\n    charEnded(charEnded => ended);\n  };\n\n  const onError = () => {\n    setError(true);\n    setLoading(loading => false);\n  };\n\n  const itemRefs = useRef([]);\n\n  const focusOnItem = id => {\n    itemRefs.current.forEach(item => item.classList.remove('char__item_selected'));\n    itemRefs.current[id].classList.add('char__item_selected');\n    itemRefs.current[id].focus();\n  };\n\n  const elements = chars.map((item, i) => {\n    const {\n      name,\n      thumbnail,\n      id\n    } = item;\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"char__item\",\n      ref: el => itemRefs.current[i] = el,\n      tabIndex: 0,\n      onClick: () => {\n        props.onCharSelected(id);\n        focusOnItem(i);\n      },\n      onKeyPress: e => {\n        if (e.key === ' ' || e.key === \"Enter\") {\n          props.onCharSelected(id);\n          focusOnItem(i);\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: thumbnail,\n        alt: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"char__name\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 25\n      }, this)]\n    }, id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 18\n    }, this);\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"char__list\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"char__grid\",\n      children: elements\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button button__main button__long\",\n      disabled: newItemLoading,\n      style: {\n        'display': charEnded ? 'none' : 'block'\n      },\n      onClick: () => onRequest(offset),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 13\n  }, this);\n};\n\n_s(CharList, \"aT0e5aGZAnBOWmZjmIqzC52Zw7Y=\", false, function () {\n  return [useMarvelService, useMarvelService];\n});\n\n_c = CharList;\nCharList.propTypes = {\n  onCharSelected: PropTypes.func\n};\nexport default CharList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CharList\");","map":{"version":3,"names":["useState","useRef","useEffect","PropTypes","useMarvelService","CharList","props","chars","setCharlist","newItemLoading","setNewItemLoading","offset","setOffset","charEnded","loading","error","getAllCharacters","marvelService","onRequest","onCharListLoading","then","createList","catch","onError","newCharList","ended","length","setLoading","loaing","setError","itemRefs","focusOnItem","id","current","forEach","item","classList","remove","add","focus","elements","map","i","name","thumbnail","el","onCharSelected","e","key","propTypes","func"],"sources":["/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js"],"sourcesContent":["import {useState, useRef, useEffect} from 'react';\nimport {PropTypes} from 'prop-types';\nimport useMarvelService from '../../services/MarvelService'\n// import Spinner from '../spinner/Spinner'\nimport './charList.scss';\n\n\n\n\nconst CharList = (props) => {\n\n    const [chars, setCharlist] = useState([]); \n    const [newItemLoading, setNewItemLoading] = useState(false);\n    const [offset, setOffset] = useState(210);\n    const [charEnded] = useState(false);\n\n    // focusRef = React.createRef();\n    const {loading, error, getAllCharacters} = useMarvelService();\n   \n    const marvelService = useMarvelService();\n\n    useEffect (() => {\n        onRequest();\n    }, [])\n     \n\n    const onRequest = (offset) => {\n        onCharListLoading();\n        marvelService\n        .getAllCharacters(offset)\n        .then(createList)\n        .catch(onError)\n    } \n\n    const onCharListLoading = () => {\n         setNewItemLoading(true);\n    }\n \n    const createList = (newCharList) => { \n        let ended = false; \n        if (newCharList.length < 9){\n            ended = true;\n        }\n \n        setCharlist(chars => [...chars, ...newCharList]);\n        setLoading(loaing => false);\n        setNewItemLoading(newItemLoading => false);\n        setOffset(offset => offset + 9);\n        charEnded(charEnded => ended);\n\n    }\n    \n    const onError = () => {\n        setError(true);\n        setLoading(loading => false);\n    }\n\n    const itemRefs = useRef([]);\n    \n    const focusOnItem = (id) => {\n \n        itemRefs.current.forEach(item => item.classList.remove('char__item_selected'));\n        itemRefs.current[id].classList.add('char__item_selected');\n        itemRefs.current[id].focus();\n    }\n \n        const elements = chars.map ((item, i) => {\n        const {name, thumbnail, id} = item; \n            return ( \n                 <li className=\"char__item\"\n                 key={id}\n                 ref={el => itemRefs.current[i] = el}\n                 tabIndex={0}\n                 onClick={() => {\n                    props.onCharSelected(id);\n                    focusOnItem(i)\n                }}\n                 onKeyPress={(e) => {\n                     if (e.key === ' ' || e.key === \"Enter\") {\n                         props.onCharSelected(id);\n                         focusOnItem(i);\n                     }\n                 }}> \n                        <img src={thumbnail} alt={name}/>\n                        <div className=\"char__name\">{name}</div>\n                    </li> \n            )\n        });\n\n        return (\n            <div className=\"char__list\">\n                <ul className=\"char__grid\">\n                {elements}\n                </ul>\n                <button className=\"button button__main button__long\"\n                disabled={newItemLoading}\n                style={{'display': charEnded ? 'none' : 'block'}}\n                onClick={() => onRequest(offset)}>\n                    <div className=\"inner\">load more</div>\n                </button>\n            </div>\n        ) \n}\n\nCharList.propTypes = { \n    onCharSelected: PropTypes.func\n}\n\nexport default CharList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}