{"ast":null,"code":"var _jsxFileName = \"/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from 'react';\nimport { PropTypes } from 'prop-types';\nimport useMarvelService from '../../services/MarvelService';\nimport Spinner from '../spinner/Spinner';\nimport ErrorMessage from '../errorMessage/ErrorMessage';\nimport './charList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst setContent = (process, Component, newItemLoading) => {\n  switch (process) {\n    case 'waiting':\n      return /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 11,\n        columnNumber: 20\n      }, this);\n      break;\n\n    case 'loading':\n      return newItemLoading ? /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 37\n      }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 14,\n        columnNumber: 52\n      }, this);\n      break;\n\n    case 'confirmed':\n      return /*#__PURE__*/_jsxDEV(Component, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 17,\n        columnNumber: 20\n      }, this);\n      break;\n\n    case 'error':\n      return /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 20,\n        columnNumber: 20\n      }, this);\n      break;\n\n    default:\n      throw new Error('Unexpected process state');\n  }\n};\n\nconst CharList = props => {\n  _s();\n\n  const [chars, setCharlist] = useState([]);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const [offset, setOffset] = useState(210);\n  const [charEnded, setCharEnded] = useState(false); // focusRef = React.createRef();\n\n  const {\n    loading,\n    error,\n    getAllCharacters,\n    process,\n    setProcess\n  } = useMarvelService(); // const marvelService = useMarvelService();\n\n  useEffect(() => {\n    onRequest(offset, true);\n  }, []);\n\n  const onRequest = (offset, initial) => {\n    initial ? setNewItemLoading(false) : setNewItemLoading(true);\n    getAllCharacters(offset).then(createList).then(() => setProcess('confirmed'));\n  };\n\n  const createList = newCharList => {\n    let ended = false;\n\n    if (newCharList.length < 9) {\n      ended = true;\n    }\n\n    setCharlist(chars => [...chars, ...newCharList]);\n    setNewItemLoading(newItemLoading => false);\n    setOffset(offset => offset + 9);\n    setCharEnded(charEnded => ended);\n  };\n\n  const itemRefs = useRef([]);\n\n  const focusOnItem = id => {\n    itemRefs.current.forEach(item => item.classList.remove('char__item_selected'));\n    itemRefs.current[id].classList.add('char__item_selected');\n    itemRefs.current[id].focus();\n  };\n\n  const elements = () => chars.map((item, i) => {\n    const {\n      name,\n      thumbnail,\n      id\n    } = item;\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      className: \"char__item\",\n      ref: el => itemRefs.current[i] = el,\n      tabIndex: 0,\n      onClick: () => {\n        props.onCharSelected(id);\n        focusOnItem(i);\n      },\n      onKeyPress: e => {\n        if (e.key === ' ' || e.key === \"Enter\") {\n          props.onCharSelected(id);\n          focusOnItem(i);\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"img\", {\n        src: thumbnail,\n        alt: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"char__name\",\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 25\n      }, this)]\n    }, id, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 18\n    }, this);\n  }); // const errorMessage = error ? <ErrorMessage/> : null;\n  // const spinner = loading && !newItemLoading ? <Spinner/> : null;\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"char__list\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"char__grid\",\n      children: [elements, setContent(process, () => elements(), newItemLoading)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button button__main button__long\",\n      disabled: newItemLoading,\n      style: {\n        'display': charEnded ? 'none' : 'block'\n      },\n      onClick: () => onRequest(offset),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 13\n  }, this);\n};\n\n_s(CharList, \"OwBgFqJi6uwKHNFYpK47GYtkjFo=\", false, function () {\n  return [useMarvelService];\n});\n\n_c = CharList;\nCharList.propTypes = {\n  onCharSelected: PropTypes.func.isRequired\n};\nexport default CharList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CharList\");","map":{"version":3,"names":["useState","useRef","useEffect","PropTypes","useMarvelService","Spinner","ErrorMessage","setContent","process","Component","newItemLoading","Error","CharList","props","chars","setCharlist","setNewItemLoading","offset","setOffset","charEnded","setCharEnded","loading","error","getAllCharacters","setProcess","onRequest","initial","then","createList","newCharList","ended","length","itemRefs","focusOnItem","id","current","forEach","item","classList","remove","add","focus","elements","map","i","name","thumbnail","el","onCharSelected","e","key","propTypes","func","isRequired"],"sources":["/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js"],"sourcesContent":["import {useState, useRef, useEffect} from 'react';\nimport {PropTypes} from 'prop-types';\nimport useMarvelService from '../../services/MarvelService'\nimport Spinner from '../spinner/Spinner'\nimport ErrorMessage from '../errorMessage/ErrorMessage'\nimport './charList.scss';\n\nconst setContent = (process, Component, newItemLoading) => {\n    switch (process) {\n        case 'waiting':\n            return <Spinner/>;\n            break;\n        case 'loading':\n            return newItemLoading ? <Component/> : <Spinner/>;\n            break;\n        case 'confirmed':\n            return <Component/>;\n            break;\n        case 'error':\n            return <ErrorMessage/>\n            break;\n        default:\n            throw new Error('Unexpected process state');\n    }\n}\n\n\nconst CharList = (props) => {\n\n    const [chars, setCharlist] = useState([]); \n    const [newItemLoading, setNewItemLoading] = useState(false);\n    const [offset, setOffset] = useState(210);\n    const [charEnded, setCharEnded] = useState(false);\n\n    // focusRef = React.createRef();\n    const {loading, error, getAllCharacters, process, setProcess} = useMarvelService();\n   \n    // const marvelService = useMarvelService();\n\n    useEffect (() => {\n        onRequest(offset, true);\n    }, [])\n     \n\n    const onRequest = (offset, initial) => {\n        initial ? setNewItemLoading(false) : setNewItemLoading(true);\n        getAllCharacters(offset)\n        .then(createList)\n        .then(() => setProcess('confirmed'))\n    } \n \n \n    const createList = (newCharList) => { \n        let ended = false; \n        if (newCharList.length < 9){\n            ended = true;\n        }\n \n        setCharlist(chars => [...chars, ...newCharList]);\n        setNewItemLoading(newItemLoading => false);\n        setOffset(offset => offset + 9);\n        setCharEnded(charEnded => ended);\n\n    } \n    const itemRefs = useRef([]);\n    \n    const focusOnItem = (id) => {\n \n        itemRefs.current.forEach(item => item.classList.remove('char__item_selected'));\n        itemRefs.current[id].classList.add('char__item_selected');\n        itemRefs.current[id].focus();\n    }\n \n        const elements = () => chars.map ((item, i) => {\n        const {name, thumbnail, id} = item; \n            return ( \n                 <li className=\"char__item\"\n                 key={id}\n                 ref={el => itemRefs.current[i] = el}\n                 tabIndex={0}\n                 onClick={() => {\n                    props.onCharSelected(id);\n                    focusOnItem(i)\n                }}\n                 onKeyPress={(e) => {\n                     if (e.key === ' ' || e.key === \"Enter\") {\n                         props.onCharSelected(id);\n                         focusOnItem(i);\n                     }\n                 }}> \n                        <img src={thumbnail} alt={name}/>\n                        <div className=\"char__name\">{name}</div>\n                    </li> \n            )\n        });\n\n        // const errorMessage = error ? <ErrorMessage/> : null;\n        // const spinner = loading && !newItemLoading ? <Spinner/> : null;\n\n        return (\n            <div className=\"char__list\">\n                <ul className=\"char__grid\">\n                {/* {errorMessage}\n                {spinner} */}\n                {elements}\n                {setContent(process, () => elements(), newItemLoading)}\n                </ul>\n                <button className=\"button button__main button__long\"\n                disabled={newItemLoading}\n                style={{'display': charEnded ? 'none' : 'block'}}\n                onClick={() => onRequest(offset)}>\n                    <div className=\"inner\">load more</div>\n                </button>\n            </div>\n        ) \n}\n\nCharList.propTypes = { \n    onCharSelected: PropTypes.func.isRequired\n}\n\nexport default CharList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}