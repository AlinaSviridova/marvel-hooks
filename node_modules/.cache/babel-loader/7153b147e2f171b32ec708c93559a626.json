{"ast":null,"code":"var _jsxFileName = \"/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js\",\n    _s = $RefreshSig$();\n\nimport { useState, useRef, useEffect } from 'react';\nimport { PropTypes } from 'prop-types';\nimport MarvelService from '../../services/MarvelService'; // import Spinner from '../spinner/Spinner'\n\nimport './charList.scss';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CharList = props => {\n  _s();\n\n  const [chars, setCharlist] = useState([]);\n  const [loaing, setLoading] = useState(true);\n  const [error, setError] = useState(false);\n  const [newItemLoading, setNewItemLoading] = useState(false);\n  const [offset, setOffset] = useState(210);\n  const [charEnded] = useState(false); // focusRef = React.createRef();\n\n  const marvelService = new MarvelService();\n  useEffect(() => {\n    onRequest();\n  }, []);\n\n  const onRequest = offset => {\n    onCharListLoading();\n    marvelService.getAllCharacters(offset).then(createList).catch(onError);\n  };\n\n  const onCharListLoading = () => {\n    setNewItemLoading(true);\n  };\n\n  const createList = newCharList => {\n    let ended = false;\n\n    if (newCharList.length < 9) {\n      ended = true;\n    }\n\n    setCharlist(chars => [...chars, ...newCharList]);\n    setLoading(loaing => false);\n    setNewItemLoading(newItemLoading => false);\n    setOffset(offset => offset + 9);\n    charEnded(charEnded => ended);\n  };\n\n  const onError = () => {\n    setError(true);\n    setLoading(loading => false);\n  };\n\n  const itemRefs = useRef([]);\n\n  const focusOnItem = id => {\n    itemRefs.forEach(item => item.classList.remove('char__item_selected'));\n    itemRefs.current[id].classList.add('char__item_selected');\n    itemRefs.current[id].focus();\n  }; // const elements = chars.map ((item, i) => {\n  // const {name, thumbnail, id} = item; \n  //     return( \n  //          <li className=\"char__item\"\n  //          key={id}\n  //          ref={el => itemRefs.current[i] = el}\n  //          tabIndex={0}\n  //          onClick={() => {\n  //             props.onCharSelected(id);\n  //             focusOnItem(i)\n  //         }}\n  //          onKeyPress={(e) => {\n  //              if (e.key === ' ' || e.key === \"Enter\") {\n  //                  props.onCharSelected(id);\n  //                  focusOnItem(i);\n  //              }\n  //          }}> \n  //                 <img src={thumbnail} alt={name}/>\n  //                 <div className=\"char__name\">{name}</div>\n  //             </li> \n  //     )\n  // };\n\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"char__list\",\n    children: [/*#__PURE__*/_jsxDEV(\"ul\", {\n      className: \"char__grid\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      className: \"button button__main button__long\",\n      disabled: newItemLoading,\n      style: {\n        'display': charEnded ? 'none' : 'block'\n      },\n      onClick: () => onRequest(offset),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"inner\",\n        children: \"load more\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 92,\n    columnNumber: 13\n  }, this);\n};\n\n_s(CharList, \"urkKCG75fmtJNUEZtpwHVa3CUao=\");\n\n_c = CharList;\nCharList.propTypes = {\n  onCharSelected: PropTypes.func\n};\nexport default CharList;\n\nvar _c;\n\n$RefreshReg$(_c, \"CharList\");","map":{"version":3,"names":["useState","useRef","useEffect","PropTypes","MarvelService","CharList","props","chars","setCharlist","loaing","setLoading","error","setError","newItemLoading","setNewItemLoading","offset","setOffset","charEnded","marvelService","onRequest","onCharListLoading","getAllCharacters","then","createList","catch","onError","newCharList","ended","length","loading","itemRefs","focusOnItem","id","forEach","item","classList","remove","current","add","focus","propTypes","onCharSelected","func"],"sources":["/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/charList/CharList.js"],"sourcesContent":["import {useState, useRef, useEffect} from 'react';\nimport {PropTypes} from 'prop-types';\nimport MarvelService from '../../services/MarvelService'\n// import Spinner from '../spinner/Spinner'\nimport './charList.scss';\n\n\n\n\nconst CharList = (props) => {\n\n    const [chars, setCharlist] = useState([]);\n    const [loaing, setLoading] = useState(true);\n    const [error, setError] = useState(false);\n    const [newItemLoading, setNewItemLoading] = useState(false);\n    const [offset, setOffset] = useState(210);\n    const [charEnded] = useState(false);\n\n    // focusRef = React.createRef();\n\n   \n    const marvelService = new MarvelService();\n\n    useEffect (() => {\n        onRequest();\n    }, [])\n     \n\n    const onRequest = (offset) => {\n        onCharListLoading();\n        marvelService\n        .getAllCharacters(offset)\n        .then(createList)\n        .catch(onError)\n    } \n\n    const onCharListLoading = () => {\n         setNewItemLoading(true);\n    }\n \n    const createList = (newCharList) => { \n        let ended = false; \n        if (newCharList.length < 9){\n            ended = true;\n        }\n \n        setCharlist(chars => [...chars, ...newCharList]);\n        setLoading(loaing => false);\n        setNewItemLoading(newItemLoading => false);\n        setOffset(offset => offset + 9);\n        charEnded(charEnded => ended);\n\n    }\n    \n    const onError = () => {\n        setError(true);\n        setLoading(loading => false);\n    }\n\n    const itemRefs = useRef([]);\n    \n    const focusOnItem = (id) => {\n        itemRefs.forEach(item => item.classList.remove('char__item_selected'));\n        itemRefs.current[id].classList.add('char__item_selected');\n        itemRefs.current[id].focus();\n    }\n \n        // const elements = chars.map ((item, i) => {\n        // const {name, thumbnail, id} = item; \n        //     return( \n        //          <li className=\"char__item\"\n        //          key={id}\n        //          ref={el => itemRefs.current[i] = el}\n        //          tabIndex={0}\n        //          onClick={() => {\n        //             props.onCharSelected(id);\n        //             focusOnItem(i)\n        //         }}\n        //          onKeyPress={(e) => {\n        //              if (e.key === ' ' || e.key === \"Enter\") {\n        //                  props.onCharSelected(id);\n        //                  focusOnItem(i);\n        //              }\n        //          }}> \n        //                 <img src={thumbnail} alt={name}/>\n        //                 <div className=\"char__name\">{name}</div>\n        //             </li> \n        //     )\n        // };\n\n        return (\n            <div className=\"char__list\">\n                <ul className=\"char__grid\">\n                {/* {elements} */}\n                </ul>\n                <button className=\"button button__main button__long\"\n                disabled={newItemLoading}\n                style={{'display': charEnded ? 'none' : 'block'}}\n                onClick={() => onRequest(offset)}>\n                    <div className=\"inner\">load more</div>\n                </button>\n            </div>\n        ) \n}\n\nCharList.propTypes = { \n    onCharSelected: PropTypes.func\n}\n\nexport default CharList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}