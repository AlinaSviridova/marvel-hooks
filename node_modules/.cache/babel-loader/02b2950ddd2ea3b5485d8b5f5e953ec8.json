{"ast":null,"code":"import _toConsumableArray from\"/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect}from'react';import{Link}from'react-router-dom';import useMarvelService from'../../services/MarvelService';import'./comicsList.scss';import uw from'../../resources/img/UW.png';import xMen from'../../resources/img/x-men.png';import Spinner from'../spinner/Spinner';import ErrorMessage from'../errorMessage/ErrorMessage';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ComicsList=function ComicsList(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comicsList=_useState2[0],setComicsList=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),newItemLoading=_useState4[0],setNewItemLoading=_useState4[1];var _useState5=useState(210),_useState6=_slicedToArray(_useState5,2),offset=_useState6[0],setOffset=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),comicsEnded=_useState8[0],setComicsEnded=_useState8[1];var _useMarvelService=useMarvelService(),loading=_useMarvelService.loading,error=_useMarvelService.error,getAllComics=_useMarvelService.getAllComics;useEffect(function(){onRequest(offset,true);},[]);var onRequest=function onRequest(offset,initial){initial?setNewItemLoading(false):setNewItemLoading(true);getAllComics(offset).then(createList);};var createList=function createList(newComicsList){var ended=false;if(newComicsList.length<9){ended=true;}setComicsList(function(comics){return[].concat(_toConsumableArray(comics),_toConsumableArray(newComicsList));});setNewItemLoading(function(newItemLoading){return false;});setOffset(function(offset){return offset+8;});setComicsEnded(function(ComicsEnded){return ended;});};function renderItems(arr){var items=arr.map(function(item,i){var title=item.title,thumbnail=item.thumbnail,price=item.price;return/*#__PURE__*/_jsx(\"li\",{className:\"comics__item\",children:/*#__PURE__*/_jsxs(Link,{to:\"/comics/\".concat(item.id),children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail,alt:title,className:\"comics__item-img\"}),/*#__PURE__*/_jsx(\"div\",{className:\"comics__item-name\",children:title}),/*#__PURE__*/_jsx(\"div\",{className:\"comics__item-price\",children:price})]})},i);});return/*#__PURE__*/_jsx(\"ul\",{className:\"comics__grid\",children:items});}var items=renderItems(comicsList);var errorMessage=error?/*#__PURE__*/_jsx(ErrorMessage,{}):null;var spinner=loading&&!newItemLoading?/*#__PURE__*/_jsx(Spinner,{}):null;return/*#__PURE__*/_jsxs(\"div\",{className:\"comics__list\",children:[errorMessage,spinner,items,/*#__PURE__*/_jsx(\"button\",{className:\"button button__main button__long\",children:/*#__PURE__*/_jsx(\"div\",{className:\"inner\",children:\"load more\"})})]});};export default ComicsList;","map":{"version":3,"names":["useState","useEffect","Link","useMarvelService","uw","xMen","Spinner","ErrorMessage","ComicsList","comicsList","setComicsList","newItemLoading","setNewItemLoading","offset","setOffset","comicsEnded","setComicsEnded","loading","error","getAllComics","onRequest","initial","then","createList","newComicsList","ended","length","comics","ComicsEnded","renderItems","arr","items","map","item","i","title","thumbnail","price","id","errorMessage","spinner"],"sources":["/Users/alinasvyrydova/Downloads/Development/Course1/Files/marvel-hooks/marvel-hooks/src/components/comicsList/ComicsList.js"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport {Link} from 'react-router-dom'\nimport useMarvelService from '../../services/MarvelService'\nimport './comicsList.scss';\nimport uw from '../../resources/img/UW.png';\nimport xMen from '../../resources/img/x-men.png';\nimport Spinner from '../spinner/Spinner'\nimport ErrorMessage from '../errorMessage/ErrorMessage'\n\nconst ComicsList = () => {\n\n    const [comicsList, setComicsList] = useState([]);\n    const [newItemLoading, setNewItemLoading] = useState(false);\n    const [offset, setOffset] = useState(210);\n    const [comicsEnded, setComicsEnded] = useState(false);\n\n    const {loading, error, getAllComics} = useMarvelService();\n\n    useEffect (() => {\n        onRequest(offset, true)\n    }, []);\n\n    const onRequest = (offset, initial) => {\n        initial ? setNewItemLoading(false) : setNewItemLoading(true);\n        getAllComics(offset)\n        .then(createList)\n    }\n\n    const createList = (newComicsList) => {\n        let ended = false; \n        if (newComicsList.length < 9){\n            ended = true;\n        }\n        setComicsList(comics => [...comics, ...newComicsList]);\n        setNewItemLoading(newItemLoading => false);\n        setOffset(offset => offset + 8);\n        setComicsEnded(ComicsEnded => ended);\n    }\n\n    function renderItems (arr) {\n        \n        const items = arr.map((item, i) => {\n            const {title, thumbnail, price} = item;\n            return (\n                <li className=\"comics__item\" key={i}>\n                    <Link to={`/comics/${item.id}`}>\n                        <img src={thumbnail} alt={title} className=\"comics__item-img\"/>\n                        <div className=\"comics__item-name\">{title}</div>\n                        <div className=\"comics__item-price\">{price}</div>\n                    </Link>\n                </li>\n            )\n        })\n  \n        return ( \n                <ul className=\"comics__grid\">\n                    {items} \n                </ul> \n        ) \n    }\n    const items = renderItems(comicsList);\n    const errorMessage = error ? <ErrorMessage/> : null;\n    const spinner = loading && !newItemLoading ? <Spinner/> : null; \n   \n    return (\n        <div className=\"comics__list\">\n            {errorMessage}\n            {spinner}\n                {items} \n            <button className=\"button button__main button__long\">\n                <div className=\"inner\">load more</div>\n            </button>\n        </div>\n    )\n}\n\nexport default ComicsList;"],"mappings":"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"},"metadata":{},"sourceType":"module"}